{
    "collab_server" : "",
    "contents" : "BearSubsample<-function(data, type, n){\n  require(dplyr)\n  if (type==\"SimpleRandom\"){ ##Simple random (all n taken at random with no regard to period or site)\n    for (i in 1:nrow(data)){\n      data$uniqueID[i]<-paste(data$Period[i], data$site[i], sep=\"\", collapse=\"\") \n      data$INDuniqID[i]<-paste(data$Period[i], data$site[i], data$ID[i],sep=\"\", collapse=\"\") \n    } \n    \n    selected<-mosaic::sample(data, size=n)\n  }\n  \n  \n\n  if (type==\"Stratified\"){##For each of the six periods \n    for (i in 1:nrow(data)){\n      data$uniqueID[i]<-paste(data$Period[i], data$site[i], sep=\"\", collapse=\"\")\n      data$INDuniqID[i]<-paste(data$Period[i], data$site[i], data$ID[i],sep=\"\", collapse=\"\") \n    }\n    \n    selected<-NULL\n    for (i in (1:6)){         \n      new<-mosaic::sample(data[data$Period==i,], size = n/6)\n      selected<-rbind(selected, new)\n      selected<-filter(selected, !(is.na(Period)))\n    } \n  }\n  \n  if (type==\"Spread.one\"){##First take 1 from each site X period, then random\n    selected<-NULL\n    droprow<-NULL\n    for (i in 1:nrow(data)){\n      data$uniqueID[i]<-paste(data$Period[i], data$site[i], sep=\"\", collapse=\"\")\n      data$INDuniqID[i]<-paste(data$Period[i], data$site[i], data$ID[i],sep=\"\", collapse=\"\") \n    }\n    #data<-mutate(data, uniqueID=c(Period, site))\n    data<-sample(data)##Mix them up, then take the first one from each uniqueID\n    \n    selected<-data[!duplicated(data$uniqueID),]\n    droprow<-(!duplicated(data$uniqueID)) * c(1:nrow(data))\n    data<- data[-droprow,]\n    \n    if((n-nrow(selected))>0)\n      {(selected<-rbind(selected, mosaic::sample(data, size=(n-nrow(selected)))))}\n    else{selected<-mosaic::sample(selected, size=n)}\n    # selected<-selected[,1:15]\n  }\n  \n  if (type==\"Spread.two\"){##First take 2 from each site X period, then random\n    selected<-NULL\n    droprow<-NULL\n    for (i in 1:nrow(data)){\n      data$uniqueID[i]<-paste(data$Period[i], data$site[i], sep=\"\", collapse=\"\")\n      data$INDuniqID[i]<-paste(data$Period[i], data$site[i], data$ID[i],sep=\"\", collapse=\"\") \n    }\n    data<-sample(data)##Mix them up, then take the first one from each uniqueID\n    \n    for (s in (1:2)){ ##Do it twice this time\n    selected<-rbind(data[!duplicated(data$uniqueID),], selected)\n    droprow<-(!duplicated(data$uniqueID)) * c(1:nrow(data))\n    data<- data[-droprow,]\n      }\n    \n    \n    if((n-nrow(selected))>0)\n    {(selected<-rbind(selected, mosaic::sample(data, size=(n-nrow(selected)))))}\n    else{selected<-mosaic::sample(selected, size=n)}  }\n  \n  return(selected)\n  }",
    "created" : 1474937977727.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2962030480",
    "id" : "577DFE31",
    "lastKnownWriteTime" : 1474497535,
    "last_content_update" : 1474497535,
    "path" : "~/Google Drive/spatialMR/Rscripts/BearSubsample.R",
    "project_path" : "BearSubsample.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}